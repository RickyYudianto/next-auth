"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.signatureTitle = void 0;
function signatureTitle(context, signature, accessor) {
    var _a, _b;
    const md = [];
    if (signature.parent && ((_a = signature.parent.flags) === null || _a === void 0 ? void 0 : _a.length) > 0) {
        md.push(signature.parent.flags.map((flag) => `\`${flag}\``).join(' ') + ' ');
    }
    if (accessor) {
        md.push(accessor + ' ');
    }
    if (!['__call', '__type'].includes(signature.name)) {
        md.push(signature.name);
    }
    if (signature.typeParameters) {
        md.push(`\\<${signature.typeParameters
            .map((typeParameter) => typeParameter.name)
            .join(', ')}\\>`);
    }
    const getParameters = (parameters = []) => {
        return parameters
            .map((param) => {
            const isDestructuredParam = param.name == '__namedParameters';
            const paramsmd = [];
            if (parameters.length > 3) {
                paramsmd.push('\n  ');
            }
            if (param.flags.isRest) {
                paramsmd.push('...');
            }
            const paramItem = `${isDestructuredParam ? '«destructured»' : param.name}${param.flags.isOptional ? '?' : ''}: ${context.partials.someType(param.type, 'all')}`;
            paramsmd.push(paramItem);
            if (param.defaultValue) {
                paramsmd.push(` = ${param.defaultValue}`);
            }
            return paramsmd.join('');
        })
            .join(', ');
    };
    md.push(signature.parameters && ((_b = signature.parameters) === null || _b === void 0 ? void 0 : _b.length) > 0
        ? `(${getParameters(signature.parameters)})`
        : '()');
    if (signature.type) {
        md.push(`: ${context.partials.someType(signature.type, 'all')}`);
    }
    return md.join('');
}
exports.signatureTitle = signatureTitle;
