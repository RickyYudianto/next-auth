"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.DocusaurusThemeRenderContext = void 0;
const typedoc_plugin_markdown_1 = require("typedoc-plugin-markdown");
class DocusaurusThemeRenderContext extends typedoc_plugin_markdown_1.MarkdownThemeRenderContext {
    constructor() {
        super(...arguments);
        this.baseFrontmatterVars = (page) => {
            const sidebarPosition = parseFloat(this.getSidebarPosition(page));
            const sidebarLabel = this.getSidebarLabel(page);
            return {
                ...this.getBaseFrontmatterVars(page),
                ...(this.options.getValue('sidebar').autoConfiguration
                    ? {
                        ...(sidebarLabel && { sidebar_label: sidebarLabel }),
                        ...(sidebarPosition && {
                            sidebar_position: sidebarPosition,
                        }),
                    }
                    : {}),
            };
        };
    }
    getSidebarLabel(page) {
        if (page.url === this.options.getValue('entryDocument')) {
            return this.options.getValue('sidebar').indexLabel;
        }
        return null;
    }
    getSidebarPosition(page) {
        if (page.url === this.options.getValue('entryDocument')) {
            return page.url === page.project.url ? '0.5' : '0';
        }
        if (page.url === this.globalsFile) {
            return '0.5';
        }
        if (page.model.getFullName().split('.').length === 1) {
            return '0';
        }
        return null;
    }
}
exports.DocusaurusThemeRenderContext = DocusaurusThemeRenderContext;
